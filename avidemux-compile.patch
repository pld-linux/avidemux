--- avidemux_2.3.0/avidemux/ADM_lavformat/ADM_lavformat.cpp.orig	2007-01-04 13:25:59.000000000 +0000
+++ avidemux_2.3.0/avidemux/ADM_lavformat/ADM_lavformat.cpp	2007-01-04 13:49:36.000000000 +0000
@@ -257,33 +257,29 @@
 	c->width = info->width;  
 	c->height = info->height; 
 	
+	int _frame_rate, _frame_rate_base;
     	switch(_fps1000)
 	{
 		case 25000:
-			 c->time_base= (AVRational){1001,25025};
-			//c->frame_rate = 25025;  
-			//c->frame_rate_base = 1001;	
+			_frame_rate = 25025;
+			_frame_rate_base = 1001;
 			break;
 		case 23976:
-/*
-			c->frame_rate = 24000;  
-			c->frame_rate_base = 1001;	
-			break;
-*/
                         if(_type==MUXER_MP4 || _type==MUXER_PSP)
                         {
-                                 c->time_base= (AVRational){1001,24000};
+				_frame_rate = 24000;  
+				_frame_rate_base = 1001;	
                                 break;
                         }
 		case  29970:
-			 c->time_base= (AVRational){1001,30000};
-			//c->frame_rate = 30000;  
-			//c->frame_rate_base = 1001;	
+			_frame_rate = 30000;  
+			_frame_rate_base = 1001;	
 			break;
 		default:
                         if(_type==MUXER_MP4 || _type==MUXER_PSP)
                         {
-                                c->time_base= (AVRational){1000,_fps1000};
+				_frame_rate = _fps1000;  
+				_frame_rate_base = 1000;	
                                 break;
                         }
                         else
@@ -292,7 +288,7 @@
                             return 0;
                         }
 	}
-
+	c->time_base= (AVRational){_frame_rate_base, _frame_rate};
 			
 	c->gop_size=15;
 	c->max_b_frames=2;
